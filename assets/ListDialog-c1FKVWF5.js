import{Q as L}from"./QSpace-DhHYc43V.js";import{d as Q,aX as S,r as c,l as h,_ as C,R as E,B as f,C as p,D as n,E as a,a6 as w,F as B,G as k,Q as _,af as I,a7 as R,a8 as U,aV as A}from"./index-BA5aWebT.js";import{Q as F}from"./QForm-np2oPtr3.js";import{u as T}from"./lists-D77KvrHD.js";const q=Q({__name:"ListDialog",props:{isNewItem:{type:Boolean,default:!1},newItemInListId:{type:String,default:""}},setup(g,{expose:l}){l();const r=g,e=T(),{isNewListDialogVisible:y}=S(e),m=c(),d=c(!1),t=c(""),o=c({id:0,name:"",title:"",description:"",updated_at:null}),V=h(()=>r.isNewItem?"Nouvel item":"Nouvelle liste");async function x(){d.value=!0,r.isNewItem?await v():await N(),d.value=!1}async function v(){try{const s={title:o.value.title,id:Date.now(),description:o.value.description,list_id:Number(r.newItemInListId),created_at:new Date},i=await e.addItemInList(s);i&&i.success&&u()}catch(s){console.log(s),await m.value.validate()}}async function N(){try{const s={name:o.value.name,id:Date.now(),updated_at:null},i=await e.addList(s);i&&i.success&&u()}catch(s){const i=s;t.value=i.nameAlreadyUsed,await m.value.validate()}}function u(){e.hideNewListDialog(),b()}function b(){o.value.name="",o.value.id=0,o.value.title="",o.value.description="",o.value.updated_at=null}const D={props:r,listsStore:e,isNewListDialogVisible:y,formComponent:m,isSaving:d,isNameAlreadyExists:t,form:o,title:V,onSubmit:x,addNewItem:v,addNewList:N,closeDialog:u,onReset:b};return Object.defineProperty(D,"__isScriptSetup",{enumerable:!1,value:!0}),D}}),z={class:"text-h6"};function j(g,l,r,e,y,m){const d=E("QuillEditor");return f(),p(A,{modelValue:e.isNewListDialogVisible,"onUpdate:modelValue":l[3]||(l[3]=t=>e.isNewListDialogVisible=t),"full-height":e.props.isNewItem},{default:n(()=>[a(U,{style:{width:"400px","max-width":"90vw"}},{default:n(()=>[a(w,{class:"row items-center"},{default:n(()=>[B("div",z,k(e.title),1),a(L),a(_,{icon:"close",class:"btn-close",flat:"",round:"",dense:"",onClick:e.closeDialog})]),_:1}),a(F,{ref:"formComponent",class:"q-gutter-md",onSubmit:e.onSubmit,onReset:e.onReset},{default:n(()=>[e.props.isNewItem?(f(),p(w,{key:0,class:"pb-0"},{default:n(()=>[a(I,{modelValue:e.form.title,"onUpdate:modelValue":l[0]||(l[0]=t=>e.form.title=t),filled:"",label:"Titre","lazy-rules":!1,rules:[t=>t&&t.length>0||"Taper au moins un caractère"]},null,8,["modelValue","rules"]),a(d,{content:e.form.description,"onUpdate:content":l[1]||(l[1]=t=>e.form.description=t),theme:"snow","content-type":"html",placeholder:"Description",class:"quill-editor"},null,8,["content"])]),_:1})):(f(),p(w,{key:1,class:"pb-0"},{default:n(()=>[a(I,{modelValue:e.form.name,"onUpdate:modelValue":l[2]||(l[2]=t=>e.form.name=t),filled:"",label:"Nom de la liste",class:"form-list-name","lazy-rules":!1,rules:[t=>t&&t.length>0||"Taper au moins un caractère",t=>t!==e.isNameAlreadyExists||"Name already exists"]},null,8,["modelValue","rules"])]),_:1})),a(R,{align:"right"},{default:n(()=>[a(_,{label:"Créer",type:"submit",color:"primary",loading:e.isSaving},null,8,["loading"]),a(_,{label:"Effacer",type:"reset",color:"primary",flat:"",class:"q-ml-sm"})]),_:1})]),_:1},512)]),_:1})]),_:1},8,["modelValue","full-height"])}const H=C(q,[["render",j],["__file","ListDialog.vue"]]);export{H as L};
