import{Q as P,a as b,b as S}from"./QItemLabel-C26Gfd9w.js";import{d as C,J as U,aX as V,r as f,l as N,b3 as T,_ as I,B as g,C as p,D as i,E as l,q as E,N as R,G as O,O as D,af as z,al as B,aC as H,X as K,bb as q}from"./index-BA5aWebT.js";import{Q as G}from"./QPopupEdit-bIpPq6fd.js";import{Q as X}from"./QList-B97Zbw5y.js";import{Q as j}from"./QPage-PcLTelbh.js";import{u as A}from"./lists-D77KvrHD.js";import{L as J}from"./ListDialog-c1FKVWF5.js";import{s as M,U as W,T as F}from"./index-BqawO4WD.js";import{d as Y}from"./vuedraggable.umd-DhNZDiYf.js";import{u as Z,D as $}from"./deleteDialog-CqpYPVC_.js";import"./QMenu-BRIDIeWr.js";import"./selection-DbtMzwTB.js";import"./index-BALEXJ3-.js";import"./_commonjsHelpers-BosuxZz1.js";import"./index-C32mnd9j.js";import"./vue.runtime.esm-bundler-BnDNC94M.js";import"./QSpace-DhHYc43V.js";import"./QForm-np2oPtr3.js";const ee=C({__name:"ListsPage",setup(y,{expose:s}){s();const m=U(),e=A(),{lists:u}=V(e),n=f(!1),a=Z(),{isDialogDeleteVisible:o}=V(a),r=f(null),d=f(!1),L=N(()=>[t=>t&&t.length>0||"Taper au moins un caractÃ¨re",t=>_(t)||"Name already exists"]);function _(t){const c=u.value.find(w=>w.name===t);return n.value=!c,n.value}async function h(t){n.value?t.set():t.cancel()}function x(t){r.value=t,a.showDeleteDialog()}async function Q(){try{if(d.value=!0,!r.value)return;await e.deleteList(r.value.id),a.hideDeleteDialog(),d.value=!1}catch(t){console.log(t),d.value=!1}}function k(t,c){m.push({name:"list-id",params:{id:t},state:{name:c}})}const v={router:m,listsStore:e,lists:u,isNameAlreadyExists:n,globalStore:a,isDialogDeleteVisible:o,listSelected:r,isDeleting:d,rules:L,isNameUnique:_,inputValidation:h,handleListToDelete:x,deleteElement:Q,goToListId:k,ListDialog:J,get mdiDelete(){return M},get mdiPencil(){return W},get mdiReorderHorizontal(){return F},get draggable(){return Y},get dragOptions(){return T},DeleteDialog:$};return Object.defineProperty(v,"__isScriptSetup",{enumerable:!1,value:!0}),v}});function ae(y,s,m,e,u,n){return g(),p(j,{padding:""},{default:i(()=>[l(e.draggable,H({modelValue:e.lists,"onUpdate:modelValue":s[0]||(s[0]=a=>e.lists=a),tag:"div","item-key":"id"},e.dragOptions,{handle:".handle_icon"}),{item:i(({element:a})=>[l(X,{bordered:"",separator:""},{default:i(()=>[E((g(),p(P,{key:a.id,clickable:""},{default:i(()=>[l(b,{onClick:o=>e.goToListId(a.id,a.name)},{default:i(()=>[l(S,{class:"font-bold italic text-base"},{default:i(()=>[R(O(a.name),1)]),_:2},1024)]),_:2},1032,["onClick"]),l(b,{avatar:"",class:"flex flex-row flex-center"},{default:i(()=>[l(D,{color:"primary",name:e.mdiPencil,class:"mr-4"},{default:i(()=>[l(G,{modelValue:a.name,"onUpdate:modelValue":o=>a.name=o,"auto-save":"",class:"w-2/3"},{default:i(o=>[l(z,{modelValue:o.value,"onUpdate:modelValue":r=>o.value=r,modelModifiers:{trim:!0},dense:"",autofocus:"",counter:"","lazy-rules":!1,rules:e.rules,onKeyup:B(r=>e.inputValidation(o),["enter"])},null,8,["modelValue","onUpdate:modelValue","rules","onKeyup"])]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1032,["name"]),l(D,{color:"primary",class:"icon-delete mr-4",name:e.mdiDelete,onClick:o=>e.handleListToDelete(a)},null,8,["name","onClick"]),l(D,{color:"grey-8",name:e.mdiReorderHorizontal,class:"handle_icon"},null,8,["name"])]),_:2},1024)]),_:2},1024)),[[q]])]),_:2},1024)]),_:1},16,["modelValue"]),l(e.ListDialog),e.listSelected?(g(),p(e.DeleteDialog,{key:0,"show-dialog-delete":e.isDialogDeleteVisible,"onUpdate:showDialogDelete":s[1]||(s[1]=a=>e.isDialogDeleteVisible=a),"is-deleting":e.isDeleting,"onUpdate:isDeleting":s[2]||(s[2]=a=>e.isDeleting=a),"element-name":e.listSelected.name,"element-type":"la liste",onDeleteElement:e.deleteElement},null,8,["show-dialog-delete","is-deleting","element-name"])):K("",!0)]),_:1})}const Ve=I(ee,[["render",ae],["__file","ListsPage.vue"]]);export{Ve as default};
